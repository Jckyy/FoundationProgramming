<html> 
    <head> 
        <meta charset="UTF-8">
        <title>Assignment 2 Jacky</title> 
        <script> 
        // TODO
        // break loop on empty surname string



        // 1. CONSTANTS
            const regIsName = /^[A-Za-z]/;
            const regIsPCode = /^\d\d\d\d$/;
            const EXITINPUT = "0";
            let INPUTPHASE = true;

            let personDB = [];

            const STR_SNAME = "Enter Surname. (Letters only, type exit to stop input)";
            const STR_FNAME = "Enter First Name. (Letters only)";
            const STR_NAME_ERROR = "Error. Non-letters found or empty input"
            const STR_GENDER = "Enter Gender 'M' or 'F'";
            const STR_GENDER_ERROR = "Error. Expects 'M' or 'F'";
            const STR_AGE = "Enter age in years";
            const STR_AGE_ERROR = "Error. Age must be a number between 15 and 100.";
            const STR_PCODE = "Enter 4-digit postcode";
            const STR_PCODE_ERROR = "Error. Postcode must be a 4 digit input";

        // 2. FUNCTIONS
       
            // Surname input function
            function promptSName(str) {
                str = prompt(STR_SNAME).trim();
                // Surname input validation. Letters only and not empty
                while (!regIsName.test(str)) {
                    alert(STR_NAME_ERROR);
                    str = prompt(STR_SNAME).trim();
                }
                return str;
            }

            // First name input function
            function promptFName(str) {
                str = prompt(STR_FNAME).trim();
                // Surname input validation. Letters only and not empty
                while (!regIsName.test(str) || str.length == 0) {
                    alert(STR_NAME_ERROR);
                    str = prompt(STR_FNAME).trim();
                }
                return str;
            }

            // Gender input function
            function promptGender(str) {
                str = prompt(STR_GENDER).toUpperCase().trim();
                // Gender validation, M or F only
                while (str !== 'M' && str !== "F") {
                    alert(STR_GENDER_ERROR);
                    str = prompt(STR_G).toUpperCase().trim();
                }
                return str;
            }

            // Age input function
            function promptAge(x) {
                x = parseInt(prompt(STR_AGE));
                // Age validation, between 15 and 100
                while (x < 15 || x > 100 || isNaN(x)) {
                    alert(STR_AGE_ERROR);
                    x = parseInt(prompt(STR_AGE));
                }
                return x;
            }

            // Postcode input function
            function promptPCode(x) {
                x = prompt(STR_PCODE).trim();
                while (!regIsPCode.test(x)) {
                    console.log(STR_PCODE_ERROR);
                    x = prompt(STR_PCODE).trim();
                }
                return x;
            }

            // Employment status input function
            function confirmEmployStat(bool) {
                bool = confirm("Employment status. 'Ok' for employed, 'Cancel' for unemployed");
                if (bool) {
                    bool = 'employed';
                }
                if (bool === null) {
                    bool = confirm("Employment status. 'Ok' for employed, 'Cancel' for unemployed");
                }
                else {
                    bool = 'unemployed';
                }
                return bool;
            }


            


        // 3. GLOBAL CODE

        // INPUT PHASE
            // Create person object to fill 
            let person = new Object();
            // Loop to start input phase
            while (INPUTPHASE) {
                // 1. Surname input
                person.sName = promptSName();
                if (person.sName == "exit") {
                    break
                }
                // // 2. First name input
                // person.FName = promptFName();
                // // 3. Gender input
                // person.gender = promptGender();
                // // 4. Age input
                // person.ageYrs = promptAge();
                // // 5. Postcode Input 
                // person.pCode = promptPCode();
                // // 6. Employment status input
                // person.employStat = confirmEmployStat();

                // Add person to DB
                personDB.push(person);

                // Ask user if they want to add another person
                INPUTPHASE = confirm("Do you want to enter another person?");
            }

            console.log(personDB);


        </script> 
    </head> 
    <body> 
        <!-- Not much to see here. -->
    </body> 
</html> 
